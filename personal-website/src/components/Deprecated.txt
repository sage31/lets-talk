
  const handleSubmit = async (message) => {
    const url = "http://127.0.0.1:4444/getResponse";
    var tmpPromptResponse = "";
    try {
      setMessages((prevMessages) => [...prevMessages, message]);
      const response = await fetch(url, {
        headers: {
          "Content-Type": "application/json",
          messages: JSON.stringify([...messages, message]),
        },
      });

      // eslint-disable-next-line no-undef
      let decoder = new TextDecoderStream();
      if (!response.body) return;
      const reader = response.body.pipeThrough(decoder).getReader();

      while (true) {
        var { value, done } = await reader.read();

        if (done) {
          break;
        } else {
          tmpPromptResponse += value;
          setMessages((prevMessages) => [
            ...prevMessages,
            message,
            tmpPromptResponse,
          ]);
        }
      }
    } catch (error) {
      console.log(error);
    }
  };

  function sendAndReceiveMessage(message) {
    setMessages((prevMessages) => [...prevMessages, message]);
    fetch("http://127.0.0.1:5000/getResponse", {
      headers: {
        messages: JSON.stringify([...messages, message]),
      },
    })
      .then((response) => response.text())
      .then((text) => {
        setMessages([
          ...messages,
          message,
          {
            name: "Stevie Dean",
            role: "assistant",
            profileImgSrc: "/images/me.jpg",
            content: text,
            isSender: false,
          },
        ]);
      });
  }
